/**
 * =============================================================================
 * LAB 2: BRIDGE PATTERN â€” Multi-Format Report Generator
 * =============================================================================
 * 
 * REAL-WORLD SCENARIO:
 * You're building a reporting system for a company. They need different types
 * of reports (Financial, HR, Sales) and each report must be exportable in
 * multiple formats (PDF, HTML, CSV). How do you design this?
 * 
 * THE PROBLEM: CLASS EXPLOSION
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚  WITHOUT Bridge Pattern (inheritance approach):                         â”‚
 * â”‚                                                                         â”‚
 * â”‚  Report Types:  Financial, HR                                           â”‚
 * â”‚  Formats:       PDF, HTML, CSV                                          â”‚
 * â”‚                                                                         â”‚
 * â”‚  Classes needed: 2 Ã— 3 = 6 classes!                                     â”‚
 * â”‚    â€¢ FinancialPDFReport                                                 â”‚
 * â”‚    â€¢ FinancialHTMLReport                                                â”‚
 * â”‚    â€¢ FinancialCSVReport                                                 â”‚
 * â”‚    â€¢ HRPDFReport                                                        â”‚
 * â”‚    â€¢ HRHTMLReport                                                       â”‚
 * â”‚    â€¢ HRCSVReport                                                        â”‚
 * â”‚                                                                         â”‚
 * â”‚  Add 1 new report type? â†’ Add 3 more classes (one per format)           â”‚
 * â”‚  Add 1 new format?      â†’ Add 2 more classes (one per report type)      â”‚
 * â”‚                                                                         â”‚
 * â”‚  This grows as N Ã— M â€” EXPLOSION! ğŸ’¥                                    â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 * THE SOLUTION: BRIDGE PATTERN
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚  Separate the TWO dimensions that vary independently:                   â”‚
 * â”‚                                                                         â”‚
 * â”‚  ABSTRACTION (What)          IMPLEMENTATION (How)                       â”‚
 * â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
 * â”‚  â€¢ FinancialReport    â”€â”€â”€â–¶   â€¢ PDFRenderer                              â”‚
 * â”‚  â€¢ HRReport           â”€â”€â”€â–¶   â€¢ HTMLRenderer                             â”‚
 * â”‚                       â”€â”€â”€â–¶   â€¢ CSVRenderer                              â”‚
 * â”‚                                                                         â”‚
 * â”‚  Classes needed: 2 + 3 = 5 classes                                      â”‚
 * â”‚                                                                         â”‚
 * â”‚  Add 1 new report type? â†’ Add 1 class                                   â”‚
 * â”‚  Add 1 new format?      â†’ Add 1 class                                   â”‚
 * â”‚                                                                         â”‚
 * â”‚  This grows as N + M â€” LINEAR! âœ“                                        â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 * HOW THE BRIDGE WORKS:
 * 
 *        ABSTRACTION                              IMPLEMENTATION
 *     (Report Types)                              (Renderers)
 *                                    
 *     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *     â”‚  Report   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ has-a â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Renderer   â”‚
 *     â”‚ (abstract)â”‚                               â”‚ (interface) â”‚
 *     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
 *           â”‚                                            â”‚
 *     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *     â”‚           â”‚                          â”‚          â”‚          â”‚
 * â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”Œâ”€â”€â”€â”´â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
 * â”‚Financeâ”‚   â”‚  HR   â”‚               â”‚   PDF   â”‚ â”‚  HTML   â”‚ â”‚   CSV   â”‚
 * â”‚Report â”‚   â”‚Report â”‚               â”‚Renderer â”‚ â”‚Renderer â”‚ â”‚Renderer â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 *     The "bridge" is the reference from Report to Renderer!
 *     Any Report can use ANY Renderer at runtime.
 * 
 * =============================================================================
 * 
 * YOUR TASK:
 * Complete the Renderer implementations and Report classes (look for "TODO")
 * 
 * EXPECTED OUTPUT:
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Financial Report in HTML format generated successfully
 * HR Report in CSV format generated successfully
 * Total classes: 5 (not 6!)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * 
 * =============================================================================
 */

import java.util.*;
import java.text.NumberFormat;

public class Lab2_BridgePattern_ReportGenerator {

    // =========================================================================
    // STEP 1: THE IMPLEMENTATION INTERFACE (Renderer)
    // =========================================================================
    // This defines HOW reports are rendered. Each renderer outputs a 
    // different format, but they all have the same interface.
    // =========================================================================
    
    /**
     * The "Implementation" side of the bridge.
     * All renderers must implement this interface.
     */
    interface ReportRenderer {
        /**
         * Renders report content in a specific format.
         * 
         * @param title  The report title
         * @param headers  Column headers for the data
         * @param rows  Data rows (each row is a list of values)
         * @param footer  Optional footer text (e.g., totals, summary)
         * @return  Formatted report as a String
         */
        String render(String title, 
                      List<String> headers, 
                      List<List<String>> rows, 
                      String footer);
        
        /**
         * Returns the format name (for display purposes)
         */
        String getFormatName();
    }

    // =========================================================================
    // STEP 2: CONCRETE IMPLEMENTATIONS (Renderers)
    // =========================================================================
    // Implement three different renderers. Each one formats data differently.
    // =========================================================================
    
    /**
     * Renders reports as HTML tables.
     * 
     * OUTPUT EXAMPLE:
     * <html>
     * <head><title>Sales Report</title></head>
     * <body>
     * <h1>Sales Report</h1>
     * <table border="1">
     * <tr><th>Product</th><th>Amount</th></tr>
     * <tr><td>Widget</td><td>$100</td></tr>
     * </table>
     * <p>Total: $100</p>
     * </body>
     * </html>
     */
    static class HTMLRenderer implements ReportRenderer {
        
        @Override
        public String render(String title, 
                            List<String> headers, 
                            List<List<String>> rows, 
                            String footer) {
            
            StringBuilder html = new StringBuilder();
            
            // =================================================================
            // TODO: Build the HTML structure
            // =================================================================
            // 
            // HINT: Start with the document structure:
            //   html.append("<html>\n");
            //   html.append("<head><title>").append(title).append("</title></head>\n");
            //   html.append("<body>\n");
            //
            // HINT: Add the title as an <h1>:
            //   html.append("<h1>").append(title).append("</h1>\n");
            //
            // HINT: Create a table with border:
            //   html.append("<table border=\"1\">\n");
            //
            // HINT: Add header row with <th> tags:
            //   html.append("<tr>");
            //   for (String header : headers) {
            //       html.append("<th>").append(header).append("</th>");
            //   }
            //   html.append("</tr>\n");
            //
            // HINT: Add data rows with <td> tags:
            //   for (List<String> row : rows) {
            //       html.append("<tr>");
            //       for (String cell : row) {
            //           html.append("<td>").append(cell).append("</td>");
            //       }
            //       html.append("</tr>\n");
            //   }
            //
            // HINT: Close the table and add footer:
            //   html.append("</table>\n");
            //   if (footer != null && !footer.isEmpty()) {
            //       html.append("<p><strong>").append(footer).append("</strong></p>\n");
            //   }
            //   html.append("</body>\n</html>");
            // =================================================================
            
            // YOUR CODE HERE:
            
            
            return html.toString();
        }
        
        @Override
        public String getFormatName() {
            return "HTML";
        }
    }
    
    /**
     * Renders reports as CSV (Comma-Separated Values).
     * 
     * OUTPUT EXAMPLE:
     * "Sales Report"
     * "Product","Amount"
     * "Widget","$100"
     * "Total: $100"
     */
    static class CSVRenderer implements ReportRenderer {
        
        @Override
        public String render(String title, 
                            List<String> headers, 
                            List<List<String>> rows, 
                            String footer) {
            
            StringBuilder csv = new StringBuilder();
            
            // =================================================================
            // TODO: Build the CSV structure
            // =================================================================
            //
            // HINT: Add title as first line (quoted):
            //   csv.append("\"").append(title).append("\"\n");
            //
            // HINT: Add headers (quoted, comma-separated):
            //   csv.append(headers.stream()
            //       .map(h -> "\"" + h + "\"")
            //       .collect(Collectors.joining(","))); 
            //   csv.append("\n");
            //
            // Or use a simple loop:
            //   for (int i = 0; i < headers.size(); i++) {
            //       if (i > 0) csv.append(",");
            //       csv.append("\"").append(headers.get(i)).append("\"");
            //   }
            //   csv.append("\n");
            //
            // HINT: Add data rows the same way:
            //   for (List<String> row : rows) {
            //       for (int i = 0; i < row.size(); i++) {
            //           if (i > 0) csv.append(",");
            //           csv.append("\"").append(row.get(i)).append("\"");
            //       }
            //       csv.append("\n");
            //   }
            //
            // HINT: Add footer if present:
            //   if (footer != null && !footer.isEmpty()) {
            //       csv.append("\"").append(footer).append("\"\n");
            //   }
            // =================================================================
            
            // YOUR CODE HERE:
            
            
            return csv.toString();
        }
        
        @Override
        public String getFormatName() {
            return "CSV";
        }
    }
    
    /**
     * Renders reports as plain text (simulating PDF output).
     * 
     * OUTPUT EXAMPLE:
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     *            SALES REPORT
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     * Product          Amount
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * Widget           $100
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * Total: $100
     * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     */
    static class PDFRenderer implements ReportRenderer {
        
        @Override
        public String render(String title, 
                            List<String> headers, 
                            List<List<String>> rows, 
                            String footer) {
            
            StringBuilder pdf = new StringBuilder();
            int width = 50;  // Fixed width for formatting
            
            // =================================================================
            // TODO: Build the PDF-style structure
            // =================================================================
            //
            // HINT: Add top border:
            //   pdf.append("â•".repeat(width)).append("\n");
            //
            // HINT: Add centered title:
            //   String paddedTitle = centerText(title.toUpperCase(), width);
            //   pdf.append(paddedTitle).append("\n");
            //   pdf.append("â•".repeat(width)).append("\n");
            //
            // HINT: Add headers (use fixed-width columns):
            //   for (String header : headers) {
            //       pdf.append(String.format("%-20s", header));
            //   }
            //   pdf.append("\n");
            //   pdf.append("â”€".repeat(width)).append("\n");
            //
            // HINT: Add data rows:
            //   for (List<String> row : rows) {
            //       for (String cell : row) {
            //           pdf.append(String.format("%-20s", cell));
            //       }
            //       pdf.append("\n");
            //   }
            //
            // HINT: Add footer:
            //   pdf.append("â”€".repeat(width)).append("\n");
            //   if (footer != null && !footer.isEmpty()) {
            //       pdf.append(footer).append("\n");
            //   }
            //   pdf.append("â•".repeat(width)).append("\n");
            // =================================================================
            
            // YOUR CODE HERE:
            
            
            return pdf.toString();
        }
        
        // Helper method to center text
        private String centerText(String text, int width) {
            if (text.length() >= width) return text;
            int padding = (width - text.length()) / 2;
            return " ".repeat(padding) + text;
        }
        
        @Override
        public String getFormatName() {
            return "PDF";
        }
    }

    // =========================================================================
    // STEP 3: THE ABSTRACTION (Report base class)
    // =========================================================================
    // This defines WHAT reports contain. Each report type adds its own
    // specific data processing, but delegates rendering to the bridge.
    // =========================================================================
    
    /**
     * The "Abstraction" side of the bridge.
     * This class holds a reference to a Renderer (the "bridge").
     * Subclasses define WHAT data the report contains.
     * The Renderer decides HOW to format that data.
     */
    static abstract class Report {
        
        // THE BRIDGE! This reference connects abstraction to implementation
        protected final ReportRenderer renderer;
        
        protected String title;
        protected List<String> headers = new ArrayList<>();
        protected List<List<String>> rows = new ArrayList<>();
        
        /**
         * Constructor takes a Renderer - this is dependency injection!
         * The report doesn't know which renderer it will use until runtime.
         */
        protected Report(ReportRenderer renderer) {
            this.renderer = renderer;
        }
        
        /**
         * Sets the report title
         */
        public void setTitle(String title) {
            this.title = title;
        }
        
        /**
         * Template method: prepares data and delegates rendering.
         * Subclasses override prepareData() to customize content.
         */
        public final String generate() {
            // Step 1: Prepare report-specific data (implemented by subclasses)
            prepareData();
            
            // Step 2: Create footer (implemented by subclasses)
            String footer = createFooter();
            
            // Step 3: Delegate to renderer (THE BRIDGE IN ACTION!)
            return renderer.render(title, headers, rows, footer);
        }
        
        /**
         * Subclasses override this to set up their specific headers and data
         */
        protected abstract void prepareData();
        
        /**
         * Subclasses override this to create their specific footer
         */
        protected abstract String createFooter();
        
        /**
         * Helper: Add a row of data
         */
        protected void addRow(String... values) {
            rows.add(Arrays.asList(values));
        }
        
        /**
         * Get the renderer's format name (for display)
         */
        public String getFormatName() {
            return renderer.getFormatName();
        }
    }

    // =========================================================================
    // STEP 4: REFINED ABSTRACTIONS (Concrete Report Types)
    // =========================================================================
    // Each report type has its own data structure and formatting needs.
    // But they ALL delegate rendering to the injected Renderer.
    // =========================================================================
    
    /**
     * Financial Report - shows revenue, expenses, profit.
     * Adds currency formatting to all monetary values.
     */
    static class FinancialReport extends Report {
        
        private double revenue = 0;
        private double expenses = 0;
        private List<String[]> lineItems = new ArrayList<>();
        
        public FinancialReport(ReportRenderer renderer) {
            super(renderer);
            this.title = "Financial Report";
        }
        
        /**
         * Add a financial line item
         */
        public void addLineItem(String category, String description, double amount) {
            lineItems.add(new String[]{category, description, String.valueOf(amount)});
            if (amount > 0) {
                revenue += amount;
            } else {
                expenses += Math.abs(amount);
            }
        }
        
        @Override
        protected void prepareData() {
            // =================================================================
            // TODO: Set up financial report headers and data
            // =================================================================
            //
            // HINT: Set up headers for a financial report:
            //   headers.clear();
            //   headers.add("Category");
            //   headers.add("Description");
            //   headers.add("Amount");
            //
            // HINT: Add line items as rows with currency formatting:
            //   rows.clear();
            //   NumberFormat currency = NumberFormat.getCurrencyInstance();
            //   for (String[] item : lineItems) {
            //       double amount = Double.parseDouble(item[2]);
            //       addRow(item[0], item[1], currency.format(amount));
            //   }
            // =================================================================
            
            // YOUR CODE HERE:
            
        }
        
        @Override
        protected String createFooter() {
            // =================================================================
            // TODO: Create financial summary footer
            // =================================================================
            //
            // HINT: Format the summary with currency:
            //   NumberFormat currency = NumberFormat.getCurrencyInstance();
            //   double profit = revenue - expenses;
            //   return String.format("Revenue: %s | Expenses: %s | Profit: %s",
            //       currency.format(revenue),
            //       currency.format(expenses),
            //       currency.format(profit));
            // =================================================================
            
            // YOUR CODE HERE:
            return "";
        }
    }
    
    /**
     * HR Report - shows employee information by department.
     * Includes headcount metrics.
     */
    static class HRReport extends Report {
        
        private List<String[]> employees = new ArrayList<>();
        private Map<String, Integer> departmentCounts = new HashMap<>();
        
        public HRReport(ReportRenderer renderer) {
            super(renderer);
            this.title = "HR Report";
        }
        
        /**
         * Add an employee to the report
         */
        public void addEmployee(String name, String department, String position, int yearsOfService) {
            employees.add(new String[]{name, department, position, String.valueOf(yearsOfService)});
            departmentCounts.merge(department, 1, Integer::sum);
        }
        
        @Override
        protected void prepareData() {
            // =================================================================
            // TODO: Set up HR report headers and data
            // =================================================================
            //
            // HINT: Set up headers for an HR report:
            //   headers.clear();
            //   headers.add("Employee Name");
            //   headers.add("Department");
            //   headers.add("Position");
            //   headers.add("Years of Service");
            //
            // HINT: Sort employees by department, then add rows:
            //   rows.clear();
            //   employees.sort((a, b) -> a[1].compareTo(b[1]));  // Sort by dept
            //   for (String[] emp : employees) {
            //       addRow(emp[0], emp[1], emp[2], emp[3] + " years");
            //   }
            // =================================================================
            
            // YOUR CODE HERE:
            
        }
        
        @Override
        protected String createFooter() {
            // =================================================================
            // TODO: Create HR summary footer with headcount
            // =================================================================
            //
            // HINT: Build department summary:
            //   StringBuilder footer = new StringBuilder();
            //   footer.append("Total Employees: ").append(employees.size());
            //   footer.append(" | By Department: ");
            //   departmentCounts.forEach((dept, count) -> 
            //       footer.append(dept).append("=").append(count).append(" "));
            //   return footer.toString();
            // =================================================================
            
            // YOUR CODE HERE:
            return "";
        }
    }

    // =========================================================================
    // STEP 5: TEST YOUR SOLUTION
    // =========================================================================
    
    public static void main(String[] args) {
        System.out.println("=".repeat(70));
        System.out.println("LAB 2: BRIDGE PATTERN - Multi-Format Report Generator");
        System.out.println("=".repeat(70));
        
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // Test 1: Financial Report in HTML format
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        System.out.println("\n>>> Test 1: Financial Report â†’ HTML\n");
        
        // Create a Financial Report with an HTML Renderer (THE BRIDGE!)
        FinancialReport financialReport = new FinancialReport(new HTMLRenderer());
        financialReport.setTitle("Q4 2024 Financial Report");
        
        // Add some financial data
        financialReport.addLineItem("Revenue", "Product Sales", 150000.00);
        financialReport.addLineItem("Revenue", "Service Fees", 45000.00);
        financialReport.addLineItem("Expense", "Salaries", -80000.00);
        financialReport.addLineItem("Expense", "Marketing", -25000.00);
        financialReport.addLineItem("Expense", "Operations", -15000.00);
        
        // Generate and display
        String htmlOutput = financialReport.generate();
        System.out.println("Generated " + financialReport.getFormatName() + " output:");
        System.out.println(htmlOutput);
        
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // Test 2: HR Report in CSV format
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        System.out.println("\n>>> Test 2: HR Report â†’ CSV\n");
        
        // Create an HR Report with a CSV Renderer (THE BRIDGE!)
        HRReport hrReport = new HRReport(new CSVRenderer());
        hrReport.setTitle("Employee Directory 2024");
        
        // Add some employee data
        hrReport.addEmployee("Alice Johnson", "Engineering", "Senior Developer", 5);
        hrReport.addEmployee("Bob Smith", "Engineering", "Tech Lead", 8);
        hrReport.addEmployee("Carol White", "Marketing", "Marketing Manager", 3);
        hrReport.addEmployee("David Brown", "Sales", "Sales Rep", 2);
        hrReport.addEmployee("Eve Davis", "Engineering", "Junior Developer", 1);
        
        // Generate and display
        String csvOutput = hrReport.generate();
        System.out.println("Generated " + hrReport.getFormatName() + " output:");
        System.out.println(csvOutput);
        
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // Test 3: Same Financial Report in PDF format (reusing report type!)
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        System.out.println("\n>>> Test 3: Financial Report â†’ PDF (same data, different format!)\n");
        
        // Create ANOTHER Financial Report but with PDF Renderer
        FinancialReport financialPdf = new FinancialReport(new PDFRenderer());
        financialPdf.setTitle("Q4 2024 Financial Report");
        financialPdf.addLineItem("Revenue", "Product Sales", 150000.00);
        financialPdf.addLineItem("Revenue", "Service Fees", 45000.00);
        financialPdf.addLineItem("Expense", "Salaries", -80000.00);
        financialPdf.addLineItem("Expense", "Marketing", -25000.00);
        
        String pdfOutput = financialPdf.generate();
        System.out.println("Generated " + financialPdf.getFormatName() + " output:");
        System.out.println(pdfOutput);
        
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // Verify class count (the point of Bridge Pattern!)
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        System.out.println("\n>>> CLASS COUNT VERIFICATION\n");
        System.out.println("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        System.out.println("â”‚  IMPLEMENTATION CLASSES (Renderers):                   â”‚");
        System.out.println("â”‚    1. HTMLRenderer                                     â”‚");
        System.out.println("â”‚    2. CSVRenderer                                      â”‚");
        System.out.println("â”‚    3. PDFRenderer                                      â”‚");
        System.out.println("â”‚                                                        â”‚");
        System.out.println("â”‚  ABSTRACTION CLASSES (Reports):                        â”‚");
        System.out.println("â”‚    4. FinancialReport                                  â”‚");
        System.out.println("â”‚    5. HRReport                                         â”‚");
        System.out.println("â”‚                                                        â”‚");
        System.out.println("â”‚  TOTAL: 5 classes (not 6!)                             â”‚");
        System.out.println("â”‚                                                        â”‚");
        System.out.println("â”‚  Without Bridge: 2 reports Ã— 3 formats = 6 classes     â”‚");
        System.out.println("â”‚  With Bridge:    2 reports + 3 formats = 5 classes     â”‚");
        System.out.println("â”‚                                                        â”‚");
        System.out.println("â”‚  Add 1 more report type? Just +1 class (not +3)        â”‚");
        System.out.println("â”‚  Add 1 more format?      Just +1 class (not +2)        â”‚");
        System.out.println("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // Summary
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        System.out.println("\n" + "=".repeat(70));
        System.out.println("KEY LEARNING POINTS:");
        System.out.println("-".repeat(70));
        System.out.println("â€¢ Bridge separates WHAT (abstraction) from HOW (implementation)");
        System.out.println("â€¢ Report types can vary independently from rendering formats");
        System.out.println("â€¢ Adding new report types doesn't require new renderer code");
        System.out.println("â€¢ Adding new formats doesn't require new report code");
        System.out.println("â€¢ The 'bridge' is the reference from Report to Renderer");
        System.out.println("â€¢ Composition (has-a) beats inheritance (is-a) for flexibility");
        System.out.println("=".repeat(70));
    }
}


// =============================================================================
// =============================================================================
//                              SOLUTION BELOW
//                    (Try to solve it yourself first!)
// =============================================================================
// =============================================================================

/*
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * SOLUTION: HTMLRenderer.render()
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * @Override
 * public String render(String title, 
 *                     List<String> headers, 
 *                     List<List<String>> rows, 
 *                     String footer) {
 *     
 *     StringBuilder html = new StringBuilder();
 *     
 *     // Document structure
 *     html.append("<html>\n");
 *     html.append("<head><title>").append(title).append("</title></head>\n");
 *     html.append("<body>\n");
 *     
 *     // Title
 *     html.append("<h1>").append(title).append("</h1>\n");
 *     
 *     // Table
 *     html.append("<table border=\"1\">\n");
 *     
 *     // Headers
 *     html.append("<tr>");
 *     for (String header : headers) {
 *         html.append("<th>").append(header).append("</th>");
 *     }
 *     html.append("</tr>\n");
 *     
 *     // Data rows
 *     for (List<String> row : rows) {
 *         html.append("<tr>");
 *         for (String cell : row) {
 *             html.append("<td>").append(cell).append("</td>");
 *         }
 *         html.append("</tr>\n");
 *     }
 *     
 *     html.append("</table>\n");
 *     
 *     // Footer
 *     if (footer != null && !footer.isEmpty()) {
 *         html.append("<p><strong>").append(footer).append("</strong></p>\n");
 *     }
 *     
 *     html.append("</body>\n</html>");
 *     
 *     return html.toString();
 * }
 * 
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * SOLUTION: CSVRenderer.render()
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * @Override
 * public String render(String title, 
 *                     List<String> headers, 
 *                     List<List<String>> rows, 
 *                     String footer) {
 *     
 *     StringBuilder csv = new StringBuilder();
 *     
 *     // Title
 *     csv.append("\"").append(title).append("\"\n");
 *     
 *     // Headers
 *     for (int i = 0; i < headers.size(); i++) {
 *         if (i > 0) csv.append(",");
 *         csv.append("\"").append(headers.get(i)).append("\"");
 *     }
 *     csv.append("\n");
 *     
 *     // Data rows
 *     for (List<String> row : rows) {
 *         for (int i = 0; i < row.size(); i++) {
 *             if (i > 0) csv.append(",");
 *             csv.append("\"").append(row.get(i)).append("\"");
 *         }
 *         csv.append("\n");
 *     }
 *     
 *     // Footer
 *     if (footer != null && !footer.isEmpty()) {
 *         csv.append("\"").append(footer).append("\"\n");
 *     }
 *     
 *     return csv.toString();
 * }
 * 
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * SOLUTION: PDFRenderer.render()
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * @Override
 * public String render(String title, 
 *                     List<String> headers, 
 *                     List<List<String>> rows, 
 *                     String footer) {
 *     
 *     StringBuilder pdf = new StringBuilder();
 *     int width = 50;
 *     
 *     // Top border
 *     pdf.append("â•".repeat(width)).append("\n");
 *     
 *     // Centered title
 *     String paddedTitle = centerText(title.toUpperCase(), width);
 *     pdf.append(paddedTitle).append("\n");
 *     pdf.append("â•".repeat(width)).append("\n");
 *     
 *     // Headers
 *     for (String header : headers) {
 *         pdf.append(String.format("%-20s", header));
 *     }
 *     pdf.append("\n");
 *     pdf.append("â”€".repeat(width)).append("\n");
 *     
 *     // Data rows
 *     for (List<String> row : rows) {
 *         for (String cell : row) {
 *             pdf.append(String.format("%-20s", cell));
 *         }
 *         pdf.append("\n");
 *     }
 *     
 *     // Footer
 *     pdf.append("â”€".repeat(width)).append("\n");
 *     if (footer != null && !footer.isEmpty()) {
 *         pdf.append(footer).append("\n");
 *     }
 *     pdf.append("â•".repeat(width)).append("\n");
 *     
 *     return pdf.toString();
 * }
 * 
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * SOLUTION: FinancialReport.prepareData() and createFooter()
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * @Override
 * protected void prepareData() {
 *     headers.clear();
 *     headers.add("Category");
 *     headers.add("Description");
 *     headers.add("Amount");
 *     
 *     rows.clear();
 *     NumberFormat currency = NumberFormat.getCurrencyInstance();
 *     for (String[] item : lineItems) {
 *         double amount = Double.parseDouble(item[2]);
 *         addRow(item[0], item[1], currency.format(amount));
 *     }
 * }
 * 
 * @Override
 * protected String createFooter() {
 *     NumberFormat currency = NumberFormat.getCurrencyInstance();
 *     double profit = revenue - expenses;
 *     return String.format("Revenue: %s | Expenses: %s | Profit: %s",
 *         currency.format(revenue),
 *         currency.format(expenses),
 *         currency.format(profit));
 * }
